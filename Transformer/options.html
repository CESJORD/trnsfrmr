<html>
	<head>
	<title>My Test Extension Options</title>

	<script type="text/javascript">
	
	var sub_line = "<div class=\"sub_line\"><input class=\"sub_key\" type=\"text\" value=\"\"/><textarea class=\"sub_value\" rows=\"1\" cols=\"20\" ></textarea><button onclick=\"del(this)\">" + chrome.i18n.getMessage("option_del")+ "</button></div>";
			
	
	function localize(elementname, messageid)
	{
		var el = document.getElementsByName(elementname);
		for (var i = 0; i < el.length; i++)
		{
			el[i].innerHTML =  chrome.i18n.getMessage(messageid);
		}
		
	}
	
	// Inits Strings (i18n) and restores data
	function init()
	{
		localize("caption", "options");
		localize("save", "save");
		localize("add", "option_add");
		
		restore_options();
	}
	
	function add()
	{
		document.getElementById("subs").innerHTML += sub_line;
	}
	
	function del(button)
	{
		button.parentElement.outerHTML='';
	}
	

	// Saves options to localStorage.
	function save_options()
	{
		//localStorage["favorite_color"] = color;
	}
	
	// Restores select box state to saved value from localStorage.
	function restore_options()
	{
		// var favorite = localStorage["favorite_color"];
  
		// test: lege ein leeres Element an
		document.getElementById("subs").innerHTML = sub_line;
	}
	
	</script>
	</head>
	<body onload="init()">
		
	<h1 name="caption"></h1>
	<hr>
		<button onclick="add()" name="add"></button>
		<div class="subs" id="subs">
		</div>
		<button onclick="add()" name="add"></button>
	<hr>
		<br>
		<button onclick="save_options()" name="save"></button>
	</body>
</html>